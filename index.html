<!DOCTYPE html>
<html lang="en">

<?php include "index.php";?>

<head>
	<meta charset="utf-8">
	<title></title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> 
   <title>New York Times Search</title>

 <!--  <link rel="stylesheet" href="../assets/css/font-awesome.min.css"> -->
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
</head>

<body>



	<button id="test">Test</button>
	<div id="display"></div>
	<div> 
	<!-- <dl class="dl-horizontal">
    <dt>First Name</dt>
    <dd>Foo</dd>
    <dt>Last Name</dt>
    <dd>Bar</dd>
    <dt>Job</dt>
    <dd><img src="http://www.nytimes.com/images/2016/12/13/arts/13GLOBES-REAX-MOONLIGHT1/13GLOBES-REAX-MOONLIGHT1-thumbWide.jpg"></dd>
  </dl> -->
  <script src="https://use.fontawesome.com/7b6dd2ca46.js"></script>
<div class="container">
    <div class="jumbotron">
<!-- here is the link given to me by glyphSearch for the newspaper icon. I don't know how to make it work -->
<i class="fa fa-newspaper-o"></i> 
    New York Times Search</div>

     
<div class="container">
   <div class="row">
      <div class="panel panel-default">
        <div class="panel-heading" id="searchpar">
          <h3>Search Parameters</h3>
        </div>
        <div class="panel-body">
        <form>
        <div class="form-group">
          <label for="exampleInputEmail1">Search Term</label>
          <input type="email" class="form-control" id="exampleInputEmail1" placeholder="Email">
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Number of Records to Retrieve:</label>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">Start Year(Optional):</label>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <div class="form-group">
          <label for="exampleInputPassword1">End Year(Optional):</label>
          <input type="password" class="form-control" id="exampleInputPassword1" placeholder="Password">
        </div>
        <button type="submit" class="btn btn-default">
        <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
        Search
        </button>
        <button type="submit" class="btn btn-default">
        <span class="glyphicon glyphicon-trash" aria-hidden="true"></span>
        Clear Results</button>
        </form>
        </div>
      </div>
    </div>
  </div>
</div>
  

 <script src="https://code.jquery.com/jquery.js"></script>
 <script type="text/javascript">

	$("button").on("click", function() {

		var url = "https://api.nytimes.com/svc/search/v2/articlesearch.json";
		var base_url = "http://www.nytimes.com/";
		url += '?' + $.param({
  			'api-key': "05dd5e0a5d1841718337d9de569ceb6c",
  			'q': "golden globe",
		  'begin_date': "20120101",
		  'end_date': "20161231",
		  'hl': "true",
		  'facet_field': "source",
		  'facet_filter': "true"
			});


			$.ajax({
  					url: url,
  					method: 'GET'

				})										
		.done(function(database) {
			// response.addHeader("Access-Control-Allow-Origin", "http://www.nytimes.com");
        	console.log(database);
        
        	var results = database.response.docs;
        	console.log(results.length);

        	for (var i = 0; i < results.length; i++) {
            var newsDiv = $("<div class='item'>");

            var docImage = base_url + results[i].multimedia[0].url;

            var img = $("<img>");

            img.attr("src" , docImage);
            var text = results[i].headline.main;
           	newsDiv.prepend(img);
           	newsDiv.prepend(text);

           $("#display").prepend(newsDiv);
     		
     		}
     	});
      });

</script>

</body>
</html>